[ERROR][16156][2021-05-15 14:47:56,886][newsService.py:46] getNews - 错误 - You have not defined a default connection
[ERROR][7128][2021-05-15 14:51:10,819][app.py:1892] log_exception - Exception on /restful_v1/weibo/test [GET]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\_collections.py", line 1008, in __call__
    return self.registry[key]
KeyError: <greenlet.greenlet object at 0x000001B119CE99E8 (otid=0x000001B119CFA228) current active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\restful_v1\controller\weiboController.py", line 32, in test
  File "<string>", line 2, in add
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\scoping.py", line 105, in _proxied
    return self.registry()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\_collections.py", line 1010, in __call__
    return self.registry.setdefault(key, self.createfunc())
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 4065, in __call__
    return self.class_(**local_kw)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 176, in __init__
    bind = options.pop('bind', None) or db.engine
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 998, in engine
    return self.get_engine()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 1017, in get_engine
    return connector.get_engine()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 594, in get_engine
    self._engine = rv = self._sa.create_engine(sa_url, options)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 1027, in create_engine
    return sqlalchemy.create_engine(sa_url, **engine_opts)
  File "<string>", line 2, in create_engine
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\deprecations.py", line 298, in warned
    return fn(*args, **kwargs)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\engine\create.py", line 548, in create_engine
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\dialects\mysql\mysqldb.py", line 118, in dbapi
    return __import__("MySQLdb")
ModuleNotFoundError: No module named 'MySQLdb'
[ERROR][20832][2021-05-15 14:56:09,540][app.py:1892] log_exception - Exception on /restful_v1/weibo/test [GET]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\_collections.py", line 1008, in __call__
    return self.registry[key]
KeyError: <greenlet.greenlet object at 0x000002E608678BF8 (otid=0x000002E608677688) current active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\restful_v1\controller\weiboController.py", line 28, in test
    mysql_db.session.add(user)
  File "<string>", line 2, in add
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\scoping.py", line 105, in _proxied
    return self.registry()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\_collections.py", line 1010, in __call__
    return self.registry.setdefault(key, self.createfunc())
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 4065, in __call__
    return self.class_(**local_kw)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 176, in __init__
    bind = options.pop('bind', None) or db.engine
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 998, in engine
    return self.get_engine()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 1017, in get_engine
    return connector.get_engine()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 594, in get_engine
    self._engine = rv = self._sa.create_engine(sa_url, options)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_sqlalchemy\__init__.py", line 1027, in create_engine
    return sqlalchemy.create_engine(sa_url, **engine_opts)
  File "<string>", line 2, in create_engine
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\deprecations.py", line 298, in warned
    return fn(*args, **kwargs)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\engine\create.py", line 548, in create_engine
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\dialects\mysql\mysqldb.py", line 118, in dbapi
    return __import__("MySQLdb")
ModuleNotFoundError: No module named 'MySQLdb'
[ERROR][22188][2021-05-15 14:58:18,961][app.py:1892] log_exception - Exception on /restful_v1/weibo/test [GET]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\restful_v1\controller\weiboController.py", line 29, in test
    mysql_db.session.commit()
  File "<string>", line 2, in commit
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 1428, in commit
    self._transaction.commit(_to_root=self.future)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 829, in commit
    self._prepare_impl()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 808, in _prepare_impl
    self.session.flush()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 3262, in flush
    self._flush(objects)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 3402, in _flush
    transaction.rollback(_capture_exception=True)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\langhelpers.py", line 72, in __exit__
    with_traceback=exc_tb,
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\compat.py", line 211, in raise_
    raise exception
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\session.py", line 3362, in _flush
    flush_context.execute()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 453, in execute
    rec.execute(self)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 630, in execute
    uow,
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\persistence.py", line 225, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\langhelpers.py", line 1160, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\mapper.py", line 3246, in _sorted_tables
    extra_dependencies=extra_dependencies,
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\sql\ddl.py", line 1212, in sort_tables
    _warn_for_cycles=True,
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\sql\ddl.py", line 1280, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\sql\ddl.py", line 1198, in _skip_fn
    if skip_fn(fk):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\orm\mapper.py", line 3226, in skip
    dep = table_to_mapper.get(fk.column.table)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\util\langhelpers.py", line 1093, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\sqlalchemy\sql\schema.py", line 2381, in column
    tablekey,
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'weibo_user.role_id' could not find table 'roles' with which to generate a foreign key to target column 'id'
[ERROR][15092][2021-05-15 15:05:53,653][app.py:1892] log_exception - Exception on /restful_v1/weibo/test [GET]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\restful_v1\controller\weiboController.py", line 18, in test
    user.following = row['following']
KeyError: 'following'
[ERROR][21316][2021-05-15 17:27:35,440][baseForm.py:22] validate_for_api - {'account': ['This field is required.']}
[ERROR][21712][2021-05-15 17:29:17,315][baseForm.py:22] validate_for_api - {'account': ['This field is required.']}
[ERROR][17456][2021-05-15 17:29:45,392][userService.py:62] register - 错误 - 'UserForm' object has no attribute 'account'
[ERROR][4456][2021-05-15 17:32:20,482][userService.py:63] register - 错误 - 'SQLAlchemy' object has no attribute 'commit'
[ERROR][1640][2021-05-15 17:41:43,310][app.py:1892] log_exception - Exception on /api_v1/user/login [POST]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\controller\userController.py", line 25, in login
    result = userService.login(form)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\service\userService.py", line 30, in login
    login_user(user, remember=form.remember_me.data)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_login\utils.py", line 166, in login_user
    if not force and not user.is_active:
AttributeError: 'User' object has no attribute 'is_active'
[ERROR][22160][2021-05-15 17:41:44,849][app.py:1892] log_exception - Exception on /api_v1/user/login [POST]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\controller\userController.py", line 25, in login
    result = userService.login(form)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\service\userService.py", line 30, in login
    login_user(user, remember=form.remember_me.data)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_login\utils.py", line 166, in login_user
    if not force and not user.is_active:
AttributeError: 'User' object has no attribute 'is_active'
[ERROR][15996][2021-05-15 17:43:24,970][app.py:1892] log_exception - Exception on /api_v1/user/login [POST]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\controller\userController.py", line 25, in login
    result = userService.login(form)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\service\userService.py", line 31, in login
    login_user(user, remember=remember)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_login\utils.py", line 166, in login_user
    if not force and not user.is_active:
AttributeError: 'User' object has no attribute 'is_active'
[ERROR][20908][2021-05-15 17:44:20,481][app.py:1892] log_exception - Exception on /api_v1/user/login [POST]
Traceback (most recent call last):
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\_compat.py", line 39, in reraise
    raise value
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask\app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\controller\userController.py", line 25, in login
    result = userService.login(form)
  File "E:\PycharmProjects\32Git\flask-demo\application\api_v1\service\userService.py", line 31, in login
    login_user(user, remember=remember)
  File "C:\Users\xie\Anaconda3\envs\DataServer\lib\site-packages\flask_login\utils.py", line 169, in login_user
    user_id = getattr(user, current_app.login_manager.id_attribute)()
AttributeError: 'User' object has no attribute 'get_id'
